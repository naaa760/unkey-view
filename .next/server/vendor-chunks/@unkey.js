"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@unkey";
exports.ids = ["vendor-chunks/@unkey"];
exports.modules = {

/***/ "(rsc)/./node_modules/@unkey/api/dist/index.mjs":
/*!************************************************!*\
  !*** ./node_modules/@unkey/api/dist/index.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Unkey: () => (/* binding */ Unkey),\n/* harmony export */   and: () => (/* reexport safe */ _unkey_rbac__WEBPACK_IMPORTED_MODULE_0__.and),\n/* harmony export */   or: () => (/* reexport safe */ _unkey_rbac__WEBPACK_IMPORTED_MODULE_0__.or),\n/* harmony export */   verifyKey: () => (/* binding */ verifyKey)\n/* harmony export */ });\n/* harmony import */ var _unkey_rbac__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @unkey/rbac */ \"(rsc)/./node_modules/@unkey/rbac/dist/index.js\");\n// package.json\nvar version = \"0.26.2\";\n\n// src/telemetry.ts\nfunction getTelemetry(opts) {\n  let platform;\n  let runtime;\n  const sdkVersions = [`@unkey/api@${version}`];\n  try {\n    if (typeof process !== \"undefined\") {\n      if (process.env.UNKEY_DISABLE_TELEMETRY) {\n        return null;\n      }\n      platform = process.env.VERCEL ? \"vercel\" : process.env.AWS_REGION ? \"aws\" : void 0;\n      if (typeof EdgeRuntime !== \"undefined\") {\n        runtime = \"edge-light\";\n      } else {\n        runtime = `node@${process.version}`;\n      }\n    }\n    if (opts.wrapperSdkVersion) {\n      sdkVersions.push(opts.wrapperSdkVersion);\n    }\n  } catch (_error) {\n  }\n  return { platform, runtime, sdkVersions };\n}\n\n// src/client.ts\nvar Unkey = class {\n  baseUrl;\n  rootKey;\n  cache;\n  telemetry;\n  retry;\n  constructor(opts) {\n    this.baseUrl = opts.baseUrl ?? \"https://api.unkey.dev\";\n    this.rootKey = opts.rootKey ?? opts.token;\n    if (!opts.disableTelemetry) {\n      this.telemetry = getTelemetry(opts);\n    }\n    this.cache = opts.cache;\n    if (!this.rootKey) {\n      throw new Error(\n        \"Unkey root key must be set, maybe you passed in `undefined` or an empty string?\"\n      );\n    }\n    this.retry = {\n      attempts: opts.retry?.attempts ?? 5,\n      backoff: opts.retry?.backoff ?? ((n) => Math.round(Math.exp(n) * 10))\n    };\n  }\n  getHeaders() {\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${this.rootKey}`\n    };\n    if (this.telemetry?.sdkVersions) {\n      headers[\"Unkey-Telemetry-SDK\"] = this.telemetry.sdkVersions.join(\",\");\n    }\n    if (this.telemetry?.platform) {\n      headers[\"Unkey-Telemetry-Platform\"] = this.telemetry.platform;\n    }\n    if (this.telemetry?.runtime) {\n      headers[\"Unkey-Telemetry-Runtime\"] = this.telemetry.runtime;\n    }\n    return headers;\n  }\n  async fetch(req) {\n    let res = null;\n    let err = null;\n    for (let i = 0; i <= this.retry.attempts; i++) {\n      const url = new URL(`${this.baseUrl}/${req.path.join(\"/\")}`);\n      if (req.query) {\n        for (const [k, v] of Object.entries(req.query)) {\n          if (typeof v === \"undefined\" || v === null) {\n            continue;\n          }\n          url.searchParams.set(k, v.toString());\n        }\n      }\n      res = await fetch(url, {\n        method: req.method,\n        headers: this.getHeaders(),\n        cache: this.cache,\n        body: JSON.stringify(req.body)\n      }).catch((e) => {\n        err = e;\n        return null;\n      });\n      if (res?.ok) {\n        return { result: await res.json() };\n      }\n      const backoff = this.retry.backoff(i);\n      console.debug(\n        \"attempt %d of %d to reach %s failed, retrying in %d ms: %s | %s\",\n        i + 1,\n        this.retry.attempts + 1,\n        url,\n        backoff,\n        // @ts-ignore I don't understand why `err` is `never`\n        err?.message ?? `status=${res?.status}`,\n        res?.headers.get(\"unkey-request-id\")\n      );\n      await new Promise((r) => setTimeout(r, backoff));\n    }\n    if (res) {\n      return { error: await res.json() };\n    }\n    return {\n      error: {\n        // @ts-ignore\n        code: \"FETCH_ERROR\",\n        // @ts-ignore I don't understand why `err` is `never`\n        message: err?.message ?? \"No response\",\n        docs: \"https://developer.mozilla.org/en-US/docs/Web/API/fetch\",\n        requestId: \"N/A\"\n      }\n    };\n  }\n  get keys() {\n    return {\n      create: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"keys.createKey\"],\n          method: \"POST\",\n          body: req\n        });\n      },\n      update: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"keys.updateKey\"],\n          method: \"POST\",\n          body: req\n        });\n      },\n      verify: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"keys.verifyKey\"],\n          method: \"POST\",\n          body: req\n        });\n      },\n      delete: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"keys.deleteKey\"],\n          method: \"POST\",\n          body: req\n        });\n      },\n      updateRemaining: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"keys.updateRemaining\"],\n          method: \"POST\",\n          body: req\n        });\n      },\n      get: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"keys.getKey\"],\n          method: \"GET\",\n          query: req\n        });\n      },\n      getVerifications: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"keys.getVerifications\"],\n          method: \"GET\",\n          query: req\n        });\n      }\n    };\n  }\n  get apis() {\n    return {\n      create: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"apis.createApi\"],\n          method: \"POST\",\n          body: req\n        });\n      },\n      delete: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"apis.deleteApi\"],\n          method: \"POST\",\n          body: req\n        });\n      },\n      get: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"apis.getApi\"],\n          method: \"GET\",\n          query: req\n        });\n      },\n      listKeys: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"apis.listKeys\"],\n          method: \"GET\",\n          query: req\n        });\n      }\n    };\n  }\n  get ratelimits() {\n    return {\n      limit: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"ratelimits.limit\"],\n          method: \"POST\",\n          body: req\n        });\n      }\n    };\n  }\n  get identities() {\n    return {\n      create: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"identities.createIdentity\"],\n          method: \"POST\",\n          body: req\n        });\n      },\n      get: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"identities.getIdentity\"],\n          method: \"GET\",\n          query: req\n        });\n      },\n      list: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"identities.listIdentities\"],\n          method: \"GET\",\n          query: req\n        });\n      },\n      delete: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"identities.deleteIdentity\"],\n          method: \"POST\",\n          body: req\n        });\n      },\n      update: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"identities.updateIdentity\"],\n          method: \"POST\",\n          body: req\n        });\n      }\n    };\n  }\n  get migrations() {\n    return {\n      createKeys: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"migrations.createKeys\"],\n          method: \"POST\",\n          body: req\n        });\n      },\n      enqueueKeys: async (req) => {\n        return await this.fetch({\n          path: [\"v1\", \"migrations.enqueueKeys\"],\n          method: \"POST\",\n          body: req\n        });\n      }\n    };\n  }\n};\n\n// src/verify.ts\nfunction verifyKey(req) {\n  const unkey = new Unkey({ rootKey: \"public\" });\n  return unkey.keys.verify(typeof req === \"string\" ? { key: req } : req);\n}\n\n// src/index.ts\n\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHVua2V5L2FwaS9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsUUFBUTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLDBCQUEwQixnQkFBZ0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsYUFBYTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMEJBQTBCO0FBQzlDLDZCQUE2QixhQUFhLEdBQUcsbUJBQW1CO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFlBQVk7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNEJBQTRCLG1CQUFtQjtBQUMvQyx1REFBdUQsV0FBVztBQUNsRTs7QUFFQTtBQUNzQztBQU1wQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdW5rZXktcGRmLXZpZXcvLi9ub2RlX21vZHVsZXMvQHVua2V5L2FwaS9kaXN0L2luZGV4Lm1qcz9kMDIxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhY2thZ2UuanNvblxudmFyIHZlcnNpb24gPSBcIjAuMjYuMlwiO1xuXG4vLyBzcmMvdGVsZW1ldHJ5LnRzXG5mdW5jdGlvbiBnZXRUZWxlbWV0cnkob3B0cykge1xuICBsZXQgcGxhdGZvcm07XG4gIGxldCBydW50aW1lO1xuICBjb25zdCBzZGtWZXJzaW9ucyA9IFtgQHVua2V5L2FwaUAke3ZlcnNpb259YF07XG4gIHRyeSB7XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuVU5LRVlfRElTQUJMRV9URUxFTUVUUlkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBwbGF0Zm9ybSA9IHByb2Nlc3MuZW52LlZFUkNFTCA/IFwidmVyY2VsXCIgOiBwcm9jZXNzLmVudi5BV1NfUkVHSU9OID8gXCJhd3NcIiA6IHZvaWQgMDtcbiAgICAgIGlmICh0eXBlb2YgRWRnZVJ1bnRpbWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcnVudGltZSA9IFwiZWRnZS1saWdodFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcnVudGltZSA9IGBub2RlQCR7cHJvY2Vzcy52ZXJzaW9ufWA7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvcHRzLndyYXBwZXJTZGtWZXJzaW9uKSB7XG4gICAgICBzZGtWZXJzaW9ucy5wdXNoKG9wdHMud3JhcHBlclNka1ZlcnNpb24pO1xuICAgIH1cbiAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gIH1cbiAgcmV0dXJuIHsgcGxhdGZvcm0sIHJ1bnRpbWUsIHNka1ZlcnNpb25zIH07XG59XG5cbi8vIHNyYy9jbGllbnQudHNcbnZhciBVbmtleSA9IGNsYXNzIHtcbiAgYmFzZVVybDtcbiAgcm9vdEtleTtcbiAgY2FjaGU7XG4gIHRlbGVtZXRyeTtcbiAgcmV0cnk7XG4gIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICB0aGlzLmJhc2VVcmwgPSBvcHRzLmJhc2VVcmwgPz8gXCJodHRwczovL2FwaS51bmtleS5kZXZcIjtcbiAgICB0aGlzLnJvb3RLZXkgPSBvcHRzLnJvb3RLZXkgPz8gb3B0cy50b2tlbjtcbiAgICBpZiAoIW9wdHMuZGlzYWJsZVRlbGVtZXRyeSkge1xuICAgICAgdGhpcy50ZWxlbWV0cnkgPSBnZXRUZWxlbWV0cnkob3B0cyk7XG4gICAgfVxuICAgIHRoaXMuY2FjaGUgPSBvcHRzLmNhY2hlO1xuICAgIGlmICghdGhpcy5yb290S2V5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiVW5rZXkgcm9vdCBrZXkgbXVzdCBiZSBzZXQsIG1heWJlIHlvdSBwYXNzZWQgaW4gYHVuZGVmaW5lZGAgb3IgYW4gZW1wdHkgc3RyaW5nP1wiXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLnJldHJ5ID0ge1xuICAgICAgYXR0ZW1wdHM6IG9wdHMucmV0cnk/LmF0dGVtcHRzID8/IDUsXG4gICAgICBiYWNrb2ZmOiBvcHRzLnJldHJ5Py5iYWNrb2ZmID8/ICgobikgPT4gTWF0aC5yb3VuZChNYXRoLmV4cChuKSAqIDEwKSlcbiAgICB9O1xuICB9XG4gIGdldEhlYWRlcnMoKSB7XG4gICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMucm9vdEtleX1gXG4gICAgfTtcbiAgICBpZiAodGhpcy50ZWxlbWV0cnk/LnNka1ZlcnNpb25zKSB7XG4gICAgICBoZWFkZXJzW1wiVW5rZXktVGVsZW1ldHJ5LVNES1wiXSA9IHRoaXMudGVsZW1ldHJ5LnNka1ZlcnNpb25zLmpvaW4oXCIsXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy50ZWxlbWV0cnk/LnBsYXRmb3JtKSB7XG4gICAgICBoZWFkZXJzW1wiVW5rZXktVGVsZW1ldHJ5LVBsYXRmb3JtXCJdID0gdGhpcy50ZWxlbWV0cnkucGxhdGZvcm07XG4gICAgfVxuICAgIGlmICh0aGlzLnRlbGVtZXRyeT8ucnVudGltZSkge1xuICAgICAgaGVhZGVyc1tcIlVua2V5LVRlbGVtZXRyeS1SdW50aW1lXCJdID0gdGhpcy50ZWxlbWV0cnkucnVudGltZTtcbiAgICB9XG4gICAgcmV0dXJuIGhlYWRlcnM7XG4gIH1cbiAgYXN5bmMgZmV0Y2gocmVxKSB7XG4gICAgbGV0IHJlcyA9IG51bGw7XG4gICAgbGV0IGVyciA9IG51bGw7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdGhpcy5yZXRyeS5hdHRlbXB0czsgaSsrKSB7XG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke3RoaXMuYmFzZVVybH0vJHtyZXEucGF0aC5qb2luKFwiL1wiKX1gKTtcbiAgICAgIGlmIChyZXEucXVlcnkpIHtcbiAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMocmVxLnF1ZXJ5KSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJ1bmRlZmluZWRcIiB8fCB2ID09PSBudWxsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoaywgdi50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcbiAgICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKCksXG4gICAgICAgIGNhY2hlOiB0aGlzLmNhY2hlLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXEuYm9keSlcbiAgICAgIH0pLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGVyciA9IGU7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSk7XG4gICAgICBpZiAocmVzPy5vaykge1xuICAgICAgICByZXR1cm4geyByZXN1bHQ6IGF3YWl0IHJlcy5qc29uKCkgfTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJhY2tvZmYgPSB0aGlzLnJldHJ5LmJhY2tvZmYoaSk7XG4gICAgICBjb25zb2xlLmRlYnVnKFxuICAgICAgICBcImF0dGVtcHQgJWQgb2YgJWQgdG8gcmVhY2ggJXMgZmFpbGVkLCByZXRyeWluZyBpbiAlZCBtczogJXMgfCAlc1wiLFxuICAgICAgICBpICsgMSxcbiAgICAgICAgdGhpcy5yZXRyeS5hdHRlbXB0cyArIDEsXG4gICAgICAgIHVybCxcbiAgICAgICAgYmFja29mZixcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBJIGRvbid0IHVuZGVyc3RhbmQgd2h5IGBlcnJgIGlzIGBuZXZlcmBcbiAgICAgICAgZXJyPy5tZXNzYWdlID8/IGBzdGF0dXM9JHtyZXM/LnN0YXR1c31gLFxuICAgICAgICByZXM/LmhlYWRlcnMuZ2V0KFwidW5rZXktcmVxdWVzdC1pZFwiKVxuICAgICAgKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIGJhY2tvZmYpKTtcbiAgICB9XG4gICAgaWYgKHJlcykge1xuICAgICAgcmV0dXJuIHsgZXJyb3I6IGF3YWl0IHJlcy5qc29uKCkgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29kZTogXCJGRVRDSF9FUlJPUlwiLFxuICAgICAgICAvLyBAdHMtaWdub3JlIEkgZG9uJ3QgdW5kZXJzdGFuZCB3aHkgYGVycmAgaXMgYG5ldmVyYFxuICAgICAgICBtZXNzYWdlOiBlcnI/Lm1lc3NhZ2UgPz8gXCJObyByZXNwb25zZVwiLFxuICAgICAgICBkb2NzOiBcImh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9mZXRjaFwiLFxuICAgICAgICByZXF1ZXN0SWQ6IFwiTi9BXCJcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGdldCBrZXlzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjcmVhdGU6IGFzeW5jIChyZXEpID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmV0Y2goe1xuICAgICAgICAgIHBhdGg6IFtcInYxXCIsIFwia2V5cy5jcmVhdGVLZXlcIl0sXG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBib2R5OiByZXFcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgdXBkYXRlOiBhc3luYyAocmVxKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoKHtcbiAgICAgICAgICBwYXRoOiBbXCJ2MVwiLCBcImtleXMudXBkYXRlS2V5XCJdLFxuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgYm9keTogcmVxXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHZlcmlmeTogYXN5bmMgKHJlcSkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5mZXRjaCh7XG4gICAgICAgICAgcGF0aDogW1widjFcIiwgXCJrZXlzLnZlcmlmeUtleVwiXSxcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGJvZHk6IHJlcVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBkZWxldGU6IGFzeW5jIChyZXEpID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmV0Y2goe1xuICAgICAgICAgIHBhdGg6IFtcInYxXCIsIFwia2V5cy5kZWxldGVLZXlcIl0sXG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBib2R5OiByZXFcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgdXBkYXRlUmVtYWluaW5nOiBhc3luYyAocmVxKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoKHtcbiAgICAgICAgICBwYXRoOiBbXCJ2MVwiLCBcImtleXMudXBkYXRlUmVtYWluaW5nXCJdLFxuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgYm9keTogcmVxXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGdldDogYXN5bmMgKHJlcSkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5mZXRjaCh7XG4gICAgICAgICAgcGF0aDogW1widjFcIiwgXCJrZXlzLmdldEtleVwiXSxcbiAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgcXVlcnk6IHJlcVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBnZXRWZXJpZmljYXRpb25zOiBhc3luYyAocmVxKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoKHtcbiAgICAgICAgICBwYXRoOiBbXCJ2MVwiLCBcImtleXMuZ2V0VmVyaWZpY2F0aW9uc1wiXSxcbiAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgcXVlcnk6IHJlcVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGdldCBhcGlzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjcmVhdGU6IGFzeW5jIChyZXEpID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmV0Y2goe1xuICAgICAgICAgIHBhdGg6IFtcInYxXCIsIFwiYXBpcy5jcmVhdGVBcGlcIl0sXG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBib2R5OiByZXFcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZGVsZXRlOiBhc3luYyAocmVxKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoKHtcbiAgICAgICAgICBwYXRoOiBbXCJ2MVwiLCBcImFwaXMuZGVsZXRlQXBpXCJdLFxuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgYm9keTogcmVxXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGdldDogYXN5bmMgKHJlcSkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5mZXRjaCh7XG4gICAgICAgICAgcGF0aDogW1widjFcIiwgXCJhcGlzLmdldEFwaVwiXSxcbiAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgcXVlcnk6IHJlcVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBsaXN0S2V5czogYXN5bmMgKHJlcSkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5mZXRjaCh7XG4gICAgICAgICAgcGF0aDogW1widjFcIiwgXCJhcGlzLmxpc3RLZXlzXCJdLFxuICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICBxdWVyeTogcmVxXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgZ2V0IHJhdGVsaW1pdHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpbWl0OiBhc3luYyAocmVxKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoKHtcbiAgICAgICAgICBwYXRoOiBbXCJ2MVwiLCBcInJhdGVsaW1pdHMubGltaXRcIl0sXG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBib2R5OiByZXFcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBnZXQgaWRlbnRpdGllcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlOiBhc3luYyAocmVxKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoKHtcbiAgICAgICAgICBwYXRoOiBbXCJ2MVwiLCBcImlkZW50aXRpZXMuY3JlYXRlSWRlbnRpdHlcIl0sXG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBib2R5OiByZXFcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBhc3luYyAocmVxKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoKHtcbiAgICAgICAgICBwYXRoOiBbXCJ2MVwiLCBcImlkZW50aXRpZXMuZ2V0SWRlbnRpdHlcIl0sXG4gICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgIHF1ZXJ5OiByZXFcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgbGlzdDogYXN5bmMgKHJlcSkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5mZXRjaCh7XG4gICAgICAgICAgcGF0aDogW1widjFcIiwgXCJpZGVudGl0aWVzLmxpc3RJZGVudGl0aWVzXCJdLFxuICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICBxdWVyeTogcmVxXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGRlbGV0ZTogYXN5bmMgKHJlcSkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5mZXRjaCh7XG4gICAgICAgICAgcGF0aDogW1widjFcIiwgXCJpZGVudGl0aWVzLmRlbGV0ZUlkZW50aXR5XCJdLFxuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgYm9keTogcmVxXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHVwZGF0ZTogYXN5bmMgKHJlcSkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5mZXRjaCh7XG4gICAgICAgICAgcGF0aDogW1widjFcIiwgXCJpZGVudGl0aWVzLnVwZGF0ZUlkZW50aXR5XCJdLFxuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgYm9keTogcmVxXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgZ2V0IG1pZ3JhdGlvbnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNyZWF0ZUtleXM6IGFzeW5jIChyZXEpID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmV0Y2goe1xuICAgICAgICAgIHBhdGg6IFtcInYxXCIsIFwibWlncmF0aW9ucy5jcmVhdGVLZXlzXCJdLFxuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgYm9keTogcmVxXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGVucXVldWVLZXlzOiBhc3luYyAocmVxKSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoKHtcbiAgICAgICAgICBwYXRoOiBbXCJ2MVwiLCBcIm1pZ3JhdGlvbnMuZW5xdWV1ZUtleXNcIl0sXG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBib2R5OiByZXFcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufTtcblxuLy8gc3JjL3ZlcmlmeS50c1xuZnVuY3Rpb24gdmVyaWZ5S2V5KHJlcSkge1xuICBjb25zdCB1bmtleSA9IG5ldyBVbmtleSh7IHJvb3RLZXk6IFwicHVibGljXCIgfSk7XG4gIHJldHVybiB1bmtleS5rZXlzLnZlcmlmeSh0eXBlb2YgcmVxID09PSBcInN0cmluZ1wiID8geyBrZXk6IHJlcSB9IDogcmVxKTtcbn1cblxuLy8gc3JjL2luZGV4LnRzXG5pbXBvcnQgeyBhbmQsIG9yIH0gZnJvbSBcIkB1bmtleS9yYmFjXCI7XG5leHBvcnQge1xuICBVbmtleSxcbiAgYW5kLFxuICBvcixcbiAgdmVyaWZ5S2V5XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@unkey/api/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@unkey/error/dist/index.mjs":
/*!**************************************************!*\
  !*** ./node_modules/@unkey/error/dist/index.mjs ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseError: () => (/* binding */ BaseError),\n/* harmony export */   EnvError: () => (/* binding */ EnvError),\n/* harmony export */   Err: () => (/* binding */ Err),\n/* harmony export */   FetchError: () => (/* binding */ FetchError),\n/* harmony export */   Ok: () => (/* binding */ Ok),\n/* harmony export */   SchemaError: () => (/* binding */ SchemaError),\n/* harmony export */   wrap: () => (/* binding */ wrap)\n/* harmony export */ });\n// src/error-handling.ts\nfunction Ok(val) {\n  return { val };\n}\nfunction Err(err) {\n  return { err };\n}\nasync function wrap(p, errorFactory) {\n  try {\n    return Ok(await p);\n  } catch (e) {\n    return Err(errorFactory(e));\n  }\n}\n\n// src/errors/base.ts\nvar BaseError = class extends Error {\n  cause;\n  context;\n  constructor(opts) {\n    super(opts.message);\n    this.cause = opts.cause;\n    this.context = opts.context;\n  }\n  toString() {\n    return `${this.name}: ${this.message} - ${JSON.stringify(\n      this.context\n    )} - caused by ${this.cause?.toString()}`;\n  }\n};\n\n// src/errors/fetch-error.ts\nvar FetchError = class _FetchError extends BaseError {\n  retry;\n  name = _FetchError.name;\n  constructor(opts) {\n    super(opts);\n    this.retry = opts.retry;\n  }\n};\n\n// src/errors/schema-error.ts\nvar SchemaError = class _SchemaError extends BaseError {\n  retry = false;\n  name = _SchemaError.name;\n  constructor(opts) {\n    super({\n      ...opts\n    });\n  }\n  static fromZod(e, raw, context) {\n    return new _SchemaError({\n      message: e.message,\n      context: {\n        raw: JSON.stringify(raw),\n        ...context\n      }\n    });\n  }\n};\n\n// src/errors/env-error.ts\nvar EnvError = class _EnvError extends BaseError {\n  retry = false;\n  name = _EnvError.name;\n};\n\n\n//# sourceMappingURL=out.js.map\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHVua2V5L2Vycm9yL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxVQUFVLElBQUksY0FBYyxJQUFJO0FBQzlDO0FBQ0EsT0FBTyxjQUFjLHVCQUF1QjtBQUM1QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFdUU7QUFDdkU7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Vua2V5LXBkZi12aWV3Ly4vbm9kZV9tb2R1bGVzL0B1bmtleS9lcnJvci9kaXN0L2luZGV4Lm1qcz84NjBjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9lcnJvci1oYW5kbGluZy50c1xuZnVuY3Rpb24gT2sodmFsKSB7XG4gIHJldHVybiB7IHZhbCB9O1xufVxuZnVuY3Rpb24gRXJyKGVycikge1xuICByZXR1cm4geyBlcnIgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHdyYXAocCwgZXJyb3JGYWN0b3J5KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIE9rKGF3YWl0IHApO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIEVycihlcnJvckZhY3RvcnkoZSkpO1xuICB9XG59XG5cbi8vIHNyYy9lcnJvcnMvYmFzZS50c1xudmFyIEJhc2VFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjYXVzZTtcbiAgY29udGV4dDtcbiAgY29uc3RydWN0b3Iob3B0cykge1xuICAgIHN1cGVyKG9wdHMubWVzc2FnZSk7XG4gICAgdGhpcy5jYXVzZSA9IG9wdHMuY2F1c2U7XG4gICAgdGhpcy5jb250ZXh0ID0gb3B0cy5jb250ZXh0O1xuICB9XG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBgJHt0aGlzLm5hbWV9OiAke3RoaXMubWVzc2FnZX0gLSAke0pTT04uc3RyaW5naWZ5KFxuICAgICAgdGhpcy5jb250ZXh0XG4gICAgKX0gLSBjYXVzZWQgYnkgJHt0aGlzLmNhdXNlPy50b1N0cmluZygpfWA7XG4gIH1cbn07XG5cbi8vIHNyYy9lcnJvcnMvZmV0Y2gtZXJyb3IudHNcbnZhciBGZXRjaEVycm9yID0gY2xhc3MgX0ZldGNoRXJyb3IgZXh0ZW5kcyBCYXNlRXJyb3Ige1xuICByZXRyeTtcbiAgbmFtZSA9IF9GZXRjaEVycm9yLm5hbWU7XG4gIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICBzdXBlcihvcHRzKTtcbiAgICB0aGlzLnJldHJ5ID0gb3B0cy5yZXRyeTtcbiAgfVxufTtcblxuLy8gc3JjL2Vycm9ycy9zY2hlbWEtZXJyb3IudHNcbnZhciBTY2hlbWFFcnJvciA9IGNsYXNzIF9TY2hlbWFFcnJvciBleHRlbmRzIEJhc2VFcnJvciB7XG4gIHJldHJ5ID0gZmFsc2U7XG4gIG5hbWUgPSBfU2NoZW1hRXJyb3IubmFtZTtcbiAgY29uc3RydWN0b3Iob3B0cykge1xuICAgIHN1cGVyKHtcbiAgICAgIC4uLm9wdHNcbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgZnJvbVpvZChlLCByYXcsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gbmV3IF9TY2hlbWFFcnJvcih7XG4gICAgICBtZXNzYWdlOiBlLm1lc3NhZ2UsXG4gICAgICBjb250ZXh0OiB7XG4gICAgICAgIHJhdzogSlNPTi5zdHJpbmdpZnkocmF3KSxcbiAgICAgICAgLi4uY29udGV4dFxuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuXG4vLyBzcmMvZXJyb3JzL2Vudi1lcnJvci50c1xudmFyIEVudkVycm9yID0gY2xhc3MgX0VudkVycm9yIGV4dGVuZHMgQmFzZUVycm9yIHtcbiAgcmV0cnkgPSBmYWxzZTtcbiAgbmFtZSA9IF9FbnZFcnJvci5uYW1lO1xufTtcblxuZXhwb3J0IHsgQmFzZUVycm9yLCBFbnZFcnJvciwgRXJyLCBGZXRjaEVycm9yLCBPaywgU2NoZW1hRXJyb3IsIHdyYXAgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW91dC5qcy5tYXBcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@unkey/error/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@unkey/rbac/dist/index.js":
/*!************************************************!*\
  !*** ./node_modules/@unkey/rbac/dist/index.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RBAC: () => (/* binding */ RBAC),\n/* harmony export */   and: () => (/* binding */ and),\n/* harmony export */   apiActions: () => (/* binding */ apiActions),\n/* harmony export */   buildIdSchema: () => (/* binding */ buildIdSchema),\n/* harmony export */   buildQuery: () => (/* binding */ buildQuery),\n/* harmony export */   buildUnkeyQuery: () => (/* binding */ buildUnkeyQuery),\n/* harmony export */   or: () => (/* binding */ or),\n/* harmony export */   permissionQuerySchema: () => (/* binding */ permissionQuerySchema),\n/* harmony export */   ratelimitActions: () => (/* binding */ ratelimitActions),\n/* harmony export */   unkeyPermissionValidation: () => (/* binding */ unkeyPermissionValidation)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var _unkey_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @unkey/error */ \"(rsc)/./node_modules/@unkey/error/dist/index.mjs\");\n// src/permissions.ts\n\nfunction buildIdSchema(prefix) {\n  return zod__WEBPACK_IMPORTED_MODULE_0__.z.string().refine((s) => {\n    if (s === \"*\") {\n      return true;\n    }\n    const regex = new RegExp(\n      `^${prefix}_[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{8,32}$`\n    );\n    return regex.test(s);\n  });\n}\nvar apiId = buildIdSchema(\"api\");\nvar ratelimitNamespaceId = buildIdSchema(\"rl\");\nvar apiActions = zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n  \"read_api\",\n  \"create_api\",\n  \"delete_api\",\n  \"update_api\",\n  \"create_key\",\n  \"update_key\",\n  \"delete_key\",\n  \"encrypt_key\",\n  \"decrypt_key\",\n  \"read_key\"\n]);\nvar ratelimitActions = zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n  \"limit\",\n  \"create_namespace\",\n  \"read_namespace\",\n  \"update_namespace\",\n  \"delete_namespace\"\n]);\nvar unkeyPermissionValidation = zod__WEBPACK_IMPORTED_MODULE_0__.z.custom().refine((s) => {\n  zod__WEBPACK_IMPORTED_MODULE_0__.z.string().parse(s);\n  if (s === \"*\") {\n    return true;\n  }\n  const split = s.split(\".\");\n  if (split.length !== 3) {\n    return false;\n  }\n  const [resource, id, action] = split;\n  switch (resource) {\n    case \"api\": {\n      return apiId.safeParse(id).success && apiActions.safeParse(action).success;\n    }\n    case \"ratelimit\": {\n      return ratelimitNamespaceId.safeParse(id).success && ratelimitActions.safeParse(action).success;\n    }\n    default: {\n      return false;\n    }\n  }\n});\n\n// src/queries.ts\n\nvar permissionQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.union([\n  zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    and: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.lazy(() => permissionQuerySchema)).min(1, \"provide at least one permission\")\n  }),\n  zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    or: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.lazy(() => permissionQuerySchema)).min(1, \"provide at least one permission\")\n  })\n]);\nfunction merge(rule, ...args) {\n  return args.filter(Boolean).reduce(\n    (acc, arg) => {\n      if (typeof acc === \"string\") {\n        throw new Error(\"Cannot merge into a string\");\n      }\n      if (!acc[rule]) {\n        acc[rule] = [];\n      }\n      acc[rule].push(arg);\n      return acc;\n    },\n    {}\n  );\n}\nfunction or(...args) {\n  return merge(\"or\", ...args);\n}\nfunction and(...args) {\n  return merge(\"and\", ...args);\n}\nfunction buildQuery(fn) {\n  return fn({ or, and });\n}\nvar buildUnkeyQuery = buildQuery;\n\n// src/rbac.ts\n\nvar RBAC = class {\n  evaluatePermissions(q, roles) {\n    return this.evaluateQueryV1(q, roles);\n  }\n  validateQuery(q) {\n    const validQuery = permissionQuerySchema.safeParse(q);\n    if (!validQuery.success) {\n      return (0,_unkey_error__WEBPACK_IMPORTED_MODULE_1__.Err)(_unkey_error__WEBPACK_IMPORTED_MODULE_1__.SchemaError.fromZod(validQuery.error, q));\n    }\n    return (0,_unkey_error__WEBPACK_IMPORTED_MODULE_1__.Ok)({ query: validQuery.data });\n  }\n  evaluateQueryV1(query, roles) {\n    if (typeof query === \"string\") {\n      if (roles.includes(query)) {\n        return (0,_unkey_error__WEBPACK_IMPORTED_MODULE_1__.Ok)({ valid: true });\n      }\n      return (0,_unkey_error__WEBPACK_IMPORTED_MODULE_1__.Ok)({ valid: false, message: `Role ${query} not allowed` });\n    }\n    if (query.and) {\n      const results = query.and.filter(Boolean).map((q) => this.evaluateQueryV1(q, roles));\n      for (const r of results) {\n        if (r.err) {\n          return r;\n        }\n        if (!r.val.valid) {\n          return r;\n        }\n      }\n      return (0,_unkey_error__WEBPACK_IMPORTED_MODULE_1__.Ok)({ valid: true });\n    }\n    if (query.or) {\n      for (const q of query.or) {\n        const r = this.evaluateQueryV1(q, roles);\n        if (r.err) {\n          return r;\n        }\n        if (r.val.valid) {\n          return r;\n        }\n      }\n      return (0,_unkey_error__WEBPACK_IMPORTED_MODULE_1__.Ok)({ valid: false, message: \"No role matched\" });\n    }\n    return (0,_unkey_error__WEBPACK_IMPORTED_MODULE_1__.Err)(new _unkey_error__WEBPACK_IMPORTED_MODULE_1__.SchemaError({ message: \"reached end of evaluate and no match\" }));\n  }\n};\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHVua2V5L3JiYWMvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN3QjtBQUN4QjtBQUNBLFNBQVMsa0NBQUM7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsT0FBTyw4REFBOEQsS0FBSztBQUNwRjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixrQ0FBQztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGtDQUFDO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxrQ0FBQztBQUNqQyxFQUFFLGtDQUFDO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQzhCO0FBQzlCLDRCQUE0QixrQ0FBRTtBQUM5QixFQUFFLGtDQUFFO0FBQ0osRUFBRSxrQ0FBRTtBQUNKLFNBQVMsa0NBQUUsT0FBTyxrQ0FBRTtBQUNwQixHQUFHO0FBQ0gsRUFBRSxrQ0FBRTtBQUNKLFFBQVEsa0NBQUUsT0FBTyxrQ0FBRTtBQUNuQixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDb0Q7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGlEQUFHLENBQUMscURBQVc7QUFDNUI7QUFDQSxXQUFXLGdEQUFFLEdBQUcsd0JBQXdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBRSxHQUFHLGFBQWE7QUFDakM7QUFDQSxhQUFhLGdEQUFFLEdBQUcsK0JBQStCLE9BQU8sY0FBYztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxnREFBRSxHQUFHLGFBQWE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZ0RBQUUsR0FBRywwQ0FBMEM7QUFDNUQ7QUFDQSxXQUFXLGlEQUFHLEtBQUsscURBQVcsR0FBRyxpREFBaUQ7QUFDbEY7QUFDQTtBQVlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91bmtleS1wZGYtdmlldy8uL25vZGVfbW9kdWxlcy9AdW5rZXkvcmJhYy9kaXN0L2luZGV4LmpzPzdlNDIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3Blcm1pc3Npb25zLnRzXG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuZnVuY3Rpb24gYnVpbGRJZFNjaGVtYShwcmVmaXgpIHtcbiAgcmV0dXJuIHouc3RyaW5nKCkucmVmaW5lKChzKSA9PiB7XG4gICAgaWYgKHMgPT09IFwiKlwiKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKFxuICAgICAgYF4ke3ByZWZpeH1fWzEyMzQ1Njc4OUFCQ0RFRkdISktMTU5QUVJTVFVWV1hZWmFiY2RlZmdoaWprbW5vcHFyc3R1dnd4eXpdezgsMzJ9JGBcbiAgICApO1xuICAgIHJldHVybiByZWdleC50ZXN0KHMpO1xuICB9KTtcbn1cbnZhciBhcGlJZCA9IGJ1aWxkSWRTY2hlbWEoXCJhcGlcIik7XG52YXIgcmF0ZWxpbWl0TmFtZXNwYWNlSWQgPSBidWlsZElkU2NoZW1hKFwicmxcIik7XG52YXIgYXBpQWN0aW9ucyA9IHouZW51bShbXG4gIFwicmVhZF9hcGlcIixcbiAgXCJjcmVhdGVfYXBpXCIsXG4gIFwiZGVsZXRlX2FwaVwiLFxuICBcInVwZGF0ZV9hcGlcIixcbiAgXCJjcmVhdGVfa2V5XCIsXG4gIFwidXBkYXRlX2tleVwiLFxuICBcImRlbGV0ZV9rZXlcIixcbiAgXCJlbmNyeXB0X2tleVwiLFxuICBcImRlY3J5cHRfa2V5XCIsXG4gIFwicmVhZF9rZXlcIlxuXSk7XG52YXIgcmF0ZWxpbWl0QWN0aW9ucyA9IHouZW51bShbXG4gIFwibGltaXRcIixcbiAgXCJjcmVhdGVfbmFtZXNwYWNlXCIsXG4gIFwicmVhZF9uYW1lc3BhY2VcIixcbiAgXCJ1cGRhdGVfbmFtZXNwYWNlXCIsXG4gIFwiZGVsZXRlX25hbWVzcGFjZVwiXG5dKTtcbnZhciB1bmtleVBlcm1pc3Npb25WYWxpZGF0aW9uID0gei5jdXN0b20oKS5yZWZpbmUoKHMpID0+IHtcbiAgei5zdHJpbmcoKS5wYXJzZShzKTtcbiAgaWYgKHMgPT09IFwiKlwiKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgY29uc3Qgc3BsaXQgPSBzLnNwbGl0KFwiLlwiKTtcbiAgaWYgKHNwbGl0Lmxlbmd0aCAhPT0gMykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBbcmVzb3VyY2UsIGlkLCBhY3Rpb25dID0gc3BsaXQ7XG4gIHN3aXRjaCAocmVzb3VyY2UpIHtcbiAgICBjYXNlIFwiYXBpXCI6IHtcbiAgICAgIHJldHVybiBhcGlJZC5zYWZlUGFyc2UoaWQpLnN1Y2Nlc3MgJiYgYXBpQWN0aW9ucy5zYWZlUGFyc2UoYWN0aW9uKS5zdWNjZXNzO1xuICAgIH1cbiAgICBjYXNlIFwicmF0ZWxpbWl0XCI6IHtcbiAgICAgIHJldHVybiByYXRlbGltaXROYW1lc3BhY2VJZC5zYWZlUGFyc2UoaWQpLnN1Y2Nlc3MgJiYgcmF0ZWxpbWl0QWN0aW9ucy5zYWZlUGFyc2UoYWN0aW9uKS5zdWNjZXNzO1xuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG59KTtcblxuLy8gc3JjL3F1ZXJpZXMudHNcbmltcG9ydCB7IHogYXMgejIgfSBmcm9tIFwiem9kXCI7XG52YXIgcGVybWlzc2lvblF1ZXJ5U2NoZW1hID0gejIudW5pb24oW1xuICB6Mi5zdHJpbmcoKSxcbiAgejIub2JqZWN0KHtcbiAgICBhbmQ6IHoyLmFycmF5KHoyLmxhenkoKCkgPT4gcGVybWlzc2lvblF1ZXJ5U2NoZW1hKSkubWluKDEsIFwicHJvdmlkZSBhdCBsZWFzdCBvbmUgcGVybWlzc2lvblwiKVxuICB9KSxcbiAgejIub2JqZWN0KHtcbiAgICBvcjogejIuYXJyYXkoejIubGF6eSgoKSA9PiBwZXJtaXNzaW9uUXVlcnlTY2hlbWEpKS5taW4oMSwgXCJwcm92aWRlIGF0IGxlYXN0IG9uZSBwZXJtaXNzaW9uXCIpXG4gIH0pXG5dKTtcbmZ1bmN0aW9uIG1lcmdlKHJ1bGUsIC4uLmFyZ3MpIHtcbiAgcmV0dXJuIGFyZ3MuZmlsdGVyKEJvb2xlYW4pLnJlZHVjZShcbiAgICAoYWNjLCBhcmcpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgYWNjID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBtZXJnZSBpbnRvIGEgc3RyaW5nXCIpO1xuICAgICAgfVxuICAgICAgaWYgKCFhY2NbcnVsZV0pIHtcbiAgICAgICAgYWNjW3J1bGVdID0gW107XG4gICAgICB9XG4gICAgICBhY2NbcnVsZV0ucHVzaChhcmcpO1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LFxuICAgIHt9XG4gICk7XG59XG5mdW5jdGlvbiBvciguLi5hcmdzKSB7XG4gIHJldHVybiBtZXJnZShcIm9yXCIsIC4uLmFyZ3MpO1xufVxuZnVuY3Rpb24gYW5kKC4uLmFyZ3MpIHtcbiAgcmV0dXJuIG1lcmdlKFwiYW5kXCIsIC4uLmFyZ3MpO1xufVxuZnVuY3Rpb24gYnVpbGRRdWVyeShmbikge1xuICByZXR1cm4gZm4oeyBvciwgYW5kIH0pO1xufVxudmFyIGJ1aWxkVW5rZXlRdWVyeSA9IGJ1aWxkUXVlcnk7XG5cbi8vIHNyYy9yYmFjLnRzXG5pbXBvcnQgeyBFcnIsIE9rLCBTY2hlbWFFcnJvciB9IGZyb20gXCJAdW5rZXkvZXJyb3JcIjtcbnZhciBSQkFDID0gY2xhc3Mge1xuICBldmFsdWF0ZVBlcm1pc3Npb25zKHEsIHJvbGVzKSB7XG4gICAgcmV0dXJuIHRoaXMuZXZhbHVhdGVRdWVyeVYxKHEsIHJvbGVzKTtcbiAgfVxuICB2YWxpZGF0ZVF1ZXJ5KHEpIHtcbiAgICBjb25zdCB2YWxpZFF1ZXJ5ID0gcGVybWlzc2lvblF1ZXJ5U2NoZW1hLnNhZmVQYXJzZShxKTtcbiAgICBpZiAoIXZhbGlkUXVlcnkuc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIEVycihTY2hlbWFFcnJvci5mcm9tWm9kKHZhbGlkUXVlcnkuZXJyb3IsIHEpKTtcbiAgICB9XG4gICAgcmV0dXJuIE9rKHsgcXVlcnk6IHZhbGlkUXVlcnkuZGF0YSB9KTtcbiAgfVxuICBldmFsdWF0ZVF1ZXJ5VjEocXVlcnksIHJvbGVzKSB7XG4gICAgaWYgKHR5cGVvZiBxdWVyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgaWYgKHJvbGVzLmluY2x1ZGVzKHF1ZXJ5KSkge1xuICAgICAgICByZXR1cm4gT2soeyB2YWxpZDogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBPayh7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogYFJvbGUgJHtxdWVyeX0gbm90IGFsbG93ZWRgIH0pO1xuICAgIH1cbiAgICBpZiAocXVlcnkuYW5kKSB7XG4gICAgICBjb25zdCByZXN1bHRzID0gcXVlcnkuYW5kLmZpbHRlcihCb29sZWFuKS5tYXAoKHEpID0+IHRoaXMuZXZhbHVhdGVRdWVyeVYxKHEsIHJvbGVzKSk7XG4gICAgICBmb3IgKGNvbnN0IHIgb2YgcmVzdWx0cykge1xuICAgICAgICBpZiAoci5lcnIpIHtcbiAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXIudmFsLnZhbGlkKSB7XG4gICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBPayh7IHZhbGlkOiB0cnVlIH0pO1xuICAgIH1cbiAgICBpZiAocXVlcnkub3IpIHtcbiAgICAgIGZvciAoY29uc3QgcSBvZiBxdWVyeS5vcikge1xuICAgICAgICBjb25zdCByID0gdGhpcy5ldmFsdWF0ZVF1ZXJ5VjEocSwgcm9sZXMpO1xuICAgICAgICBpZiAoci5lcnIpIHtcbiAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoci52YWwudmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIE9rKHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiBcIk5vIHJvbGUgbWF0Y2hlZFwiIH0pO1xuICAgIH1cbiAgICByZXR1cm4gRXJyKG5ldyBTY2hlbWFFcnJvcih7IG1lc3NhZ2U6IFwicmVhY2hlZCBlbmQgb2YgZXZhbHVhdGUgYW5kIG5vIG1hdGNoXCIgfSkpO1xuICB9XG59O1xuZXhwb3J0IHtcbiAgUkJBQyxcbiAgYW5kLFxuICBhcGlBY3Rpb25zLFxuICBidWlsZElkU2NoZW1hLFxuICBidWlsZFF1ZXJ5LFxuICBidWlsZFVua2V5UXVlcnksXG4gIG9yLFxuICBwZXJtaXNzaW9uUXVlcnlTY2hlbWEsXG4gIHJhdGVsaW1pdEFjdGlvbnMsXG4gIHVua2V5UGVybWlzc2lvblZhbGlkYXRpb25cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@unkey/rbac/dist/index.js\n");

/***/ })

};
;